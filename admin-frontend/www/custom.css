/* Light mode styles (default) */
.pearl-topbar {
  background: #f8f9fa !important;  /* Light gray background */
  color: #212529 !important;       /* Dark text */
  margin: -0.5rem -0.5rem 0.5rem -0.5rem !important;
  padding: 1rem !important;
  transition: background-color 0.3s ease, color 0.3s ease;
  border-bottom: 1px solid #dee2e6 !important;  /* Subtle border */
}
.bslib-page-title {
  background: #f8f9fa !important;
  padding: 0 !important;
  margin: 0 !important;
  transition: background-color 0.3s ease;
}

/* Dark mode styles */
/* Dark mode defaults */
[data-bs-theme="dark"] {
  /* Option A – Bootstrap-friendly: override the design token */
  --bs-body-color: #ffffff;   /* all components that read this token inherit white */

  /* Option B – plain CSS: force the body text color */
  color: #ffffff;             /* fallback for anything that doesn’t use the token */
}

[data-bs-theme="dark"] .pearl-topbar {
  background: #212529 !important;  /* Bootstrap dark */
  color: #f8f9fa !important;       /* Light gray text */
}
[data-bs-theme="dark"] .bslib-page-title {
  background: #212529 !important;
}

/* Light mode toggle styling */
.pearl-darkmode-switch .form-switch .form-check-input {
  border-color: #6c757d;
  background-color: rgba(108, 117, 125, 0.2);
}
.pearl-darkmode-switch .form-switch .form-check-input:checked {
  background-color: #0d6efd;
  border-color: #0d6efd;
}

/* Dark mode toggle styling */
[data-bs-theme="dark"] .pearl-darkmode-switch .form-switch .form-check-input {
  border-color: #6c757d;
  background-color: rgba(108, 117, 125, 0.3);
}
[data-bs-theme="dark"] .pearl-darkmode-switch .form-switch .form-check-input:checked {
  background-color: #6c757d;
  border-color: #6c757d;
}

/* Pulse animation for log download button */
@keyframes pulse {
  0% {
    box-shadow: 0 0 0 0 rgba(13, 110, 253, 0.7);
  }
  70% {
    box-shadow: 0 0 0 10px rgba(13, 110, 253, 0);
  }
  100% {
    box-shadow: 0 0 0 0 rgba(13, 110, 253, 0);
  }
}

/* Package selector emphasis styles */
.package-selector-wrapper {
  background-color: #fff3cd !important;
  border: 2px solid #ffc107 !important;
  border-radius: 8px;
  padding: 5px 10px;
  /* No animation - it interferes with selectize dropdown z-index */
}

.package-selector-wrapper.has-selection {
  background-color: #d4edda !important;
  border-color: #28a745 !important;
}

/* Ensure text is visible in package selector */
.package-selector-wrapper .selectize-input {
  background-color: #fff !important;
  color: #212529 !important;
}

.package-selector-wrapper .selectize-input .item {
  color: #212529 !important;
}

/* Inline tracker action buttons */
.pearl-tracker-action.btn { padding: 0.25rem 0.4rem; }
.pearl-tracker-action i { pointer-events: none; }

/* Reporting effort selector emphasis styles (match package styling) */
.effort-selector-wrapper {
  background-color: #fff3cd !important;
  border: 2px solid #ffc107 !important;
  border-radius: 8px;
  padding: 5px 10px;
  /* No animation - it interferes with selectize dropdown z-index */
}

.effort-selector-wrapper.has-selection {
  background-color: #d4edda !important;
  border-color: #28a745 !important;
}

/* Ensure text is visible in effort selector */
.effort-selector-wrapper .selectize-input {
  background-color: #fff !important;
  color: #212529 !important;
}

.effort-selector-wrapper .selectize-input .item {
  color: #212529 !important;
}

/* Ensure selectize dropdown appears above other content including Bootstrap tabs */
.selectize-dropdown {
  z-index: 99999 !important;
  background-color: #fff !important;
  border: 1px solid #ced4da !important;
  box-shadow: 0 6px 12px rgba(0, 0, 0, 0.175) !important;
  isolation: isolate !important;
  position: absolute !important;
}

.selectize-dropdown-content {
  background-color: #fff !important;
  max-height: 300px !important;
  overflow-y: auto !important;
  position: relative !important;
  z-index: 1 !important;
}

.selectize-dropdown-content .option {
  background-color: #fff !important;
  color: #212529 !important;
  cursor: pointer !important;
  pointer-events: auto !important;
  position: relative !important;
}

.selectize-dropdown-content .option:hover {
  background-color: #e9ecef !important;
  color: #212529 !important;
}

.selectize-dropdown-content .option.active,
.selectize-dropdown-content .option.selected {
  background-color: #0d6efd !important;
  color: #fff !important;
}

/* Force tabs to stay below dropdown */
.nav-tabs .nav-link,
.nav-pills .nav-link {
  position: relative !important;
  z-index: 1 !important;
}

/* Dark mode dropdown background */
[data-bs-theme="dark"] .selectize-dropdown {
  background-color: #212529 !important;
  border-color: #495057 !important;
}

[data-bs-theme="dark"] .selectize-dropdown-content {
  background-color: #212529 !important;
}

[data-bs-theme="dark"] .selectize-dropdown-content .option {
  background-color: #212529 !important;
}

[data-bs-theme="dark"] .selectize-dropdown-content .option:hover,
[data-bs-theme="dark"] .selectize-dropdown-content .option.active {
  background-color: #343a40 !important;
}

/* Dark mode adjustments for package selector */
[data-bs-theme="dark"] .package-selector-wrapper {
  background-color: #664d03 !important;
  border-color: #ffca2c !important;
}

[data-bs-theme="dark"] .package-selector-wrapper.has-selection {
  background-color: #0f5132 !important;
  border-color: #198754 !important;
}

/* Dark mode adjustments for reporting effort selector */
[data-bs-theme="dark"] .effort-selector-wrapper {
  background-color: #664d03 !important;
  border-color: #ffca2c !important;
}

[data-bs-theme="dark"] .effort-selector-wrapper.has-selection {
  background-color: #0f5132 !important;
  border-color: #198754 !important;
}

/* Subtle pulse for package selector when empty - using box-shadow instead of opacity to avoid stacking context issues */
@keyframes subtle-pulse {
  0%, 100% {
    box-shadow: 0 0 0 0 rgba(255, 193, 7, 0.4);
  }
  50% {
    box-shadow: 0 0 0 4px rgba(255, 193, 7, 0.2);
  }
}

/* Comment button styles for unresolved comments */
.comment-add-btn.btn-warning {
  border-color: #ffc107 !important;
  background-color: #ffc107 !important;
  color: #000 !important;
}

/* Enhanced unresolved comments badge styling */
.badge.bg-warning.text-dark {
  border: 1px solid #ffb347 !important;
  box-shadow: 0 2px 4px rgba(255, 193, 7, 0.3);
}

/* Dark mode adjustments for comment badges */
[data-bs-theme="dark"] .badge.bg-warning.text-dark {
  background-color: #ffca2c !important;
  color: #000 !important;
  border-color: #ffc107 !important;
}

[data-bs-theme="dark"] .comment-add-btn.btn-warning {
  background-color: #ffca2c !important;
  border-color: #ffc107 !important;
  color: #000 !important;
}

/* ===== COMMENT TYPE STYLING ===== */

/* Programming comment styling (yellow/amber) */
.comment-item.comment-programming {
  background-color: #fff3cd !important;
  border-left-color: #ffc107 !important;
}

/* Biostat comment styling (blue/info) */
.comment-item.comment-biostat {
  background-color: #cff4fc !important;
  border-left-color: #0dcaf0 !important;
}

/* Resolved comment styling - muted appearance */
.comment-item.comment-resolved {
  opacity: 0.75;
  background-color: #f8f9fa !important;
}

.comment-item.comment-resolved .comment-text {
  color: #6c757d;
}

.comment-item.comment-resolved.comment-programming {
  background-color: #f8f9fa !important;
  border-left-color: #adb5bd !important;
}

.comment-item.comment-resolved.comment-biostat {
  background-color: #f8f9fa !important;
  border-left-color: #adb5bd !important;
}

/* Programming badge in comment button */
.comment-badge-prog {
  font-size: 0.7rem;
  padding: 0.2em 0.4em;
}

/* Biostat badge in comment button */
.comment-badge-biostat {
  font-size: 0.7rem;
  padding: 0.2em 0.4em;
}

/* Comment type filter section styling */
.comment-type-filter {
  border: 2px solid #dee2e6;
  background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%) !important;
}

.comment-type-filter .btn-group .btn {
  padding: 0.5rem 1rem;
  font-weight: 500;
}

.comment-type-filter .badge {
  font-size: 0.65rem;
  vertical-align: middle;
}

/* Comment form section styling */
.comment-form-section {
  background-color: #f8f9fa;
  padding: 1rem;
  border-radius: 0.375rem;
  margin-top: 0.5rem;
}

/* Comment text area styling */
#comment-text-input {
  border: 2px solid #dee2e6;
  transition: border-color 0.2s ease;
}

#comment-text-input:focus {
  border-color: #86b7fe;
  box-shadow: 0 0 0 0.2rem rgba(13, 110, 253, 0.25);
}

/* Comment type selector button styling */
.btn-check:checked + .btn-outline-warning {
  background-color: #ffc107 !important;
  border-color: #ffc107 !important;
  color: #000 !important;
  box-shadow: 0 0 0 0.2rem rgba(255, 193, 7, 0.5);
}

.btn-check:checked + .btn-outline-info {
  background-color: #0dcaf0 !important;
  border-color: #0dcaf0 !important;
  color: #000 !important;
  box-shadow: 0 0 0 0.2rem rgba(13, 202, 240, 0.5);
}

/* Smooth transitions for comment items */
.comment-item {
  transition: all 0.2s ease;
}

.comment-item:hover {
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
}

/* Modal comments list styling */
#modal-comments-list {
  background-color: #fff;
}

#modal-comments-list:empty::before {
  content: "No comments to display";
  display: block;
  text-align: center;
  padding: 2rem;
  color: #6c757d;
}

/* Dark mode comment styling */
[data-bs-theme="dark"] .comment-item.comment-programming {
  background-color: #664d03 !important;
  border-left-color: #ffca2c !important;
  color: #fff;
}

[data-bs-theme="dark"] .comment-item.comment-biostat {
  background-color: #055160 !important;
  border-left-color: #0dcaf0 !important;
  color: #fff;
}

[data-bs-theme="dark"] .comment-item.comment-resolved {
  background-color: #343a40 !important;
  border-left-color: #6c757d !important;
}

[data-bs-theme="dark"] .comment-type-filter {
  background: linear-gradient(135deg, #343a40 0%, #212529 100%) !important;
  border-color: #495057;
}

[data-bs-theme="dark"] .comment-form-section {
  background-color: #343a40;
}

[data-bs-theme="dark"] #modal-comments-list {
  background-color: #212529;
  border-color: #495057 !important;
}

[data-bs-theme="dark"] .comment-item .comment-text {
  color: #e9ecef;
}

[data-bs-theme="dark"] .comment-item .text-primary {
  color: #6ea8fe !important;
}

/* ===== TRACKER TABLE GROUPED HEADERS ===== */

/* Grouped header row styling (Production/QC spanning headers) */
table.dataTable thead tr.grouped-header {
  background-color: #f8f9fa;
}

table.dataTable thead tr.grouped-header th {
  text-align: center !important;
  vertical-align: middle !important;
  font-weight: 600;
  padding: 0.5rem 0.75rem;
  border-top: 1px solid #dee2e6;
}

/* Production spanning header */
table.dataTable thead tr.grouped-header th:nth-child(3) {
  background-color: #fff8e1 !important;
  border-bottom: 3px solid #ffc107 !important;
  color: #856404;
}

/* QC spanning header */
table.dataTable thead tr.grouped-header th:nth-child(4) {
  background-color: #e3f2fd !important;
  border-bottom: 3px solid #0d6efd !important;
  color: #084298;
}

/* Sub-header row (column names under Production/QC) */
table.dataTable thead tr:not(.grouped-header) th {
  font-weight: 500;
  padding: 0.4rem 0.5rem;
  font-size: 0.875rem;
}

/* Production sub-columns background tint */
table.dataTable thead tr:not(.grouped-header) th:nth-child(n+3):nth-child(-n+6) {
  background-color: #fffdf5 !important;
}

/* QC sub-columns background tint */
table.dataTable thead tr:not(.grouped-header) th:nth-child(n+7):nth-child(-n+10) {
  background-color: #f8fbff !important;
}

/* Column filter row styling */
table.dataTable thead tr.dt-filter-row th {
  padding: 0.25rem 0.5rem;
}

/* ===== DATA ROW COLUMN SHADING ===== */

/* Production data columns background (columns 3-6: Programmer, Status, Priority, Due Date) */
table.dataTable tbody tr td:nth-child(n+3):nth-child(-n+6) {
  background-color: #fffef8 !important;
}

/* QC data columns background (columns 7-10: Programmer, Status, Level, Done) */
table.dataTable tbody tr td:nth-child(n+7):nth-child(-n+10) {
  background-color: #f8faff !important;
}

/* Maintain shading on hover */
table.dataTable tbody tr:hover td:nth-child(n+3):nth-child(-n+6) {
  background-color: #fff8e1 !important;
}

table.dataTable tbody tr:hover td:nth-child(n+7):nth-child(-n+10) {
  background-color: #e8f0fe !important;
}

/* Selected row maintains column shading with selection highlight */
table.dataTable tbody tr.selected td:nth-child(n+3):nth-child(-n+6) {
  background-color: rgba(255, 248, 225, 0.7) !important;
}

table.dataTable tbody tr.selected td:nth-child(n+7):nth-child(-n+10) {
  background-color: rgba(232, 240, 254, 0.7) !important;
}

/* Dark mode grouped headers */
[data-bs-theme="dark"] table.dataTable thead tr.grouped-header {
  background-color: #212529;
}

[data-bs-theme="dark"] table.dataTable thead tr.grouped-header th:nth-child(3) {
  background-color: #664d03 !important;
  border-bottom-color: #ffca2c !important;
  color: #ffc107;
}

[data-bs-theme="dark"] table.dataTable thead tr.grouped-header th:nth-child(4) {
  background-color: #032830 !important;
  border-bottom-color: #0d6efd !important;
  color: #6ea8fe;
}

[data-bs-theme="dark"] table.dataTable thead tr:not(.grouped-header) th:nth-child(n+3):nth-child(-n+6) {
  background-color: #2d2810 !important;
}

[data-bs-theme="dark"] table.dataTable thead tr:not(.grouped-header) th:nth-child(n+7):nth-child(-n+10) {
  background-color: #0a1929 !important;
}

/* Dark mode data row column shading */
[data-bs-theme="dark"] table.dataTable tbody tr td:nth-child(n+3):nth-child(-n+6) {
  background-color: #2a2510 !important;
}

[data-bs-theme="dark"] table.dataTable tbody tr td:nth-child(n+7):nth-child(-n+10) {
  background-color: #0d1f30 !important;
}

[data-bs-theme="dark"] table.dataTable tbody tr:hover td:nth-child(n+3):nth-child(-n+6) {
  background-color: #3d3518 !important;
}

[data-bs-theme="dark"] table.dataTable tbody tr:hover td:nth-child(n+7):nth-child(-n+10) {
  background-color: #152a40 !important;
}

[data-bs-theme="dark"] table.dataTable tbody tr.selected td:nth-child(n+3):nth-child(-n+6) {
  background-color: rgba(61, 53, 24, 0.8) !important;
}

[data-bs-theme="dark"] table.dataTable tbody tr.selected td:nth-child(n+7):nth-child(-n+10) {
  background-color: rgba(21, 42, 64, 0.8) !important;
}

/* ===== TRACKER TABLE COLUMN ALIGNMENT ===== */

/* Center all DataTable headers and cells for tracker tables */
.dataTables_wrapper table.dataTable thead th,
.dataTables_wrapper table.dataTable thead td {
  text-align: center !important;
  vertical-align: middle !important;
}

.dataTables_wrapper table.dataTable tbody td {
  text-align: center !important;
  vertical-align: middle !important;
}

/* Fix DataTable header alignment */
table.dataTable thead th {
  text-align: center !important;
}

/* Multi-row header styling */
table.dataTable thead tr:first-child th {
  border-bottom: none !important;
}

table.dataTable thead tr:last-child th {
  border-top: none !important;
}

/* Production column group header */
table.dataTable thead th[colspan="4"]:first-of-type {
  background-color: #f8f9fa !important;
  border-bottom: 2px solid #ffc107 !important;
}

/* QC column group header */
table.dataTable thead th[colspan="4"]:last-of-type {
  background-color: #e9ecef !important;
  border-bottom: 2px solid #0dcaf0 !important;
}

/* Ensure filter inputs in column headers are centered */
.dataTables_wrapper .dataTables_filter {
  text-align: right !important;
}

/* Selection action bar styling */
.alert.alert-info.mb-3 {
  border-left: 4px solid #0dcaf0;
}

/* Row selection highlight styling */
table.dataTable tbody tr.selected {
  background-color: rgba(13, 110, 253, 0.15) !important;
}

table.dataTable tbody tr.selected:hover {
  background-color: rgba(13, 110, 253, 0.25) !important;
}

/* Dark mode tracker table adjustments */
[data-bs-theme="dark"] table.dataTable thead th[colspan="4"]:first-of-type {
  background-color: #343a40 !important;
  border-bottom-color: #ffca2c !important;
}

[data-bs-theme="dark"] table.dataTable thead th[colspan="4"]:last-of-type {
  background-color: #2b3035 !important;
  border-bottom-color: #0dcaf0 !important;
}

[data-bs-theme="dark"] table.dataTable tbody tr.selected {
  background-color: rgba(13, 110, 253, 0.25) !important;
}

[data-bs-theme="dark"] table.dataTable tbody tr.selected:hover {
  background-color: rgba(13, 110, 253, 0.35) !important;
}
